<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🐞Beetle Debug</title>
    <link rel="stylesheet" href="src/style.css">    
  </head>

  <body>
    <!-- <div id="app"></div> -->
     <h1>🐞Beetle Debug</h1>

   
     <!-- <div class="container" id="container1">
       <div class="item" draggable="true" id="item-1">Item 1</div>
       <div class="item" draggable="true" id="item-2">Item 2</div>
       <div class="item" draggable="true" id="item-3">Item 3</div>
     </div>
     <div class="container" id="container2">
      <div class="item" draggable="true" id="item-4">Item 1</div>
      <div class="item" draggable="true" id="item-5">Item 2</div>
      <div class="item" draggable="true" id="item-6">Item 3</div>
    </div>
   
     <div id="outside-area"></div> -->


     <h1>Drag-and-Drop with Copy and Move</h1>
     <p>Drag items from the green container to create copies in the red sockets. Items in the red sockets can be moved between them.</p>
   
     <!-- n-container (original container) -->
     <div class="n-container">
       <div class="item" draggable="true" id="item-1">Item 1</div>
       <div class="item" draggable="true" id="item-2">Item 2</div>
       <div class="item" draggable="true" id="item-3">Item 3</div>
     </div>
   
     <!-- n-container-sockets -->
     <div class="n-container-socket"></div>
     <div class="n-container-socket"></div>
  

  <script>
      // Allow dragging of items in n-container
      const items = document.querySelectorAll('.item');
    items.forEach(item => {
      item.addEventListener('dragstart', (e) => {
        e.dataTransfer.setData('text/plain', e.target.id); // Store the item's ID
        e.dataTransfer.setData('source', 'n-container'); // Identify source container
      });
    });

    // Enable drop functionality for n-container-socket
    const sockets = document.querySelectorAll('.n-container-socket');
    sockets.forEach(socket => {
      // Allow dragover to enable dropping
      socket.addEventListener('dragover', (e) => {
        e.preventDefault(); // Required for drop to work
      });

      // Handle the drop event
      socket.addEventListener('drop', (e) => {
        e.preventDefault();
        const itemId = e.dataTransfer.getData('text/plain'); // Get the ID of the dragged item
        const source = e.dataTransfer.getData('source'); // Get the source of the dragged item

        if (source === 'n-container') {
          // Create a copy of the dragged item if it came from n-container
          const originalItem = document.getElementById(itemId);
          if (originalItem) {
            const newItem = originalItem.cloneNode(true);
            newItem.id = `${itemId}-copy-${Date.now()}`; // Assign a unique ID to the copied item
            newItem.draggable = true; // Make the copy draggable
            addDragListeners(newItem); // Add drag listeners to the new item
            socket.appendChild(newItem); // Add the copy to the socket
          }
        } else if (source === 'n-container-socket') {
          // Move the dragged item from one socket to another
          const draggedItem = document.getElementById(itemId);
          if (draggedItem) {
            socket.appendChild(draggedItem); // Append the dragged item to the new socket
          }
        }
      });
    });

    // Function to add dragstart listener to dynamically created items
    function addDragListeners(item) {
      item.addEventListener('dragstart', (e) => {
        e.dataTransfer.setData('text/plain', e.target.id); // Store the item's ID
        e.dataTransfer.setData('source', 'n-container-socket'); // Identify source container
      });
    }





    
    // // Allow dragging of items in n-container
    // const items = document.querySelectorAll('.item');
    // items.forEach(item => {
    //   item.addEventListener('dragstart', (e) => {
    //     e.dataTransfer.setData('text/plain', e.target.id); // Store the item's ID
    //   });
    // });

    // // Enable drop functionality for n-container-socket
    // const sockets = document.querySelectorAll('.n-container-socket');
    // sockets.forEach(socket => {
    //   // Allow dragover to enable dropping
    //   socket.addEventListener('dragover', (e) => {
    //     e.preventDefault(); // Required for drop to work
    //   });

    //   // Handle the drop event
    //   socket.addEventListener('drop', (e) => {
    //     e.preventDefault();
    //     const itemId = e.dataTransfer.getData('text/plain'); // Get the ID of the dragged item
    //     const originalItem = document.getElementById(itemId);

    //     if (originalItem) {
    //       // Create a copy of the item
    //       const newItem = originalItem.cloneNode(true);
    //       newItem.id = `${itemId}-copy-${Date.now()}`; // Assign a unique ID to the copied item
    //       socket.appendChild(newItem); // Add the copy to the socket
    //     }
    //   });
    // });


  //   // const container = document.getElementById('container');
  //   const items = document.querySelectorAll('.item');

  // // delete on spill 
  //   items.forEach(item => {
  //     const parentContainer = item.parentElement;

  //     item.addEventListener('dragstart', (e) => {
  //       e.dataTransfer.setData('text/plain', e.target.id);
  //       e.target.classList.add('dragging');
  //     });

  //     item.addEventListener('dragend', (e) => {

  //       const rect = parentContainer.getBoundingClientRect();
  //       const x = e.clientX;
  //       const y = e.clientY;

  //       // Check if the drop is outside the container
  //       if (
  //         x < rect.left || 
  //         x > rect.right || 
  //         y < rect.top || 
  //         y > rect.bottom
  //       ) {
  //         const itemId = e.dataTransfer.getData('text/plain');
  //         const element = document.getElementById(itemId);
  //         element.remove(); // Remove the item from the DOM
  //       }
  //     });


  //   });
  </script>

    <!-- <script type="module" src="/src/main.js"></script> -->
  </body>
</html>
